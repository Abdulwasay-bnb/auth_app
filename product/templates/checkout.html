<head>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src = "https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"></script>
  <script src = "https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <link href = "https://use.fontawesome.com/releases/v5.7.2/css/all.css" rel="stylesheet">
</head>
<body>
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top" >
    <div class="container-fluid">
        <a class="navbar-brand" href="{% url 'home' %}">Wondering</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'about' %}">About US</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'contact_us' %}">Contact Us</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'services' %}">Our Services</a>
                    <li class="nav-item">
                      <a class="nav-link" href="{% url 'product_list' %}">Product List</a>
                      <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                          Login
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                          {% if user is authenticated %}
                          <li><a class="dropdown-item" href="{% url 'login_user' %}">Log in</a></li>
                          {% else %}
                          <li><a class="dropdown-item " href="{% url 'logout' %}">Log out</a></li>
                          {% endif %}
                          <li><a class="dropdown-item " href="{% url 'sign_up' %}">Sign Up</a></li>
                          <li><hr class="dropdown-divider"></li>
                          <li><a class="dropdown-divider" href="{% url 'change_password' %}">Change Password</a></li>
                        </ul>
                      
                            
                    

            </ul>
 </div>
    </div>
</nav>
<br>
<br>
<br>
<br>

 
      {% for item in cart_items %}
      <div class="col-xl-8">
        <div class="card border shadow-none">
            <div class="card-body">
                <div class="d-flex align-items-start border-bottom pb-3">
                    <div class="me-4">
                        
                        
                    </div>
                    <div class="flex-grow-1 align-self-center overflow-hidden">
                        <div>
                            <h5 class="text-truncate font-size-18"><a href="{% url 'product_detail' product_uid=item.product.uid %}" class="text-dark">{{item.product.title}}</a></h5>
                            <p class="text-muted mb-0">
                                <i class="bx bxs-star text-warning"></i>
                                <i class="bx bxs-star text-warning"></i>
                                <i class="bx bxs-star text-warning"></i>
                                <i class="bx bxs-star text-warning"></i>
                                <i class="bx bxs-star-half text-warning"></i>
                            </p>
                            <p class="mb-0 mt-1">Color : <span class="fw-medium">Gray</span></p>
                        </div>
                    </div>
                    <div class="flex-shrink-0 ms-2">
                        <ul class="list-inline mb-0 font-size-16">
                            <li class="list-inline-item">
                                <a href="{% url 'remove_from_cart' item_uid=item.uid %}" class="text-muted px-1">
                                    <i class="mdi mdi-trash-can-outline"></i>
                                </a>
                            </li>
                            <li class="list-inline-item">
                                <a href="#" class="text-muted px-1">
                                    <i class="mdi mdi-heart-outline"></i>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>

                <div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="mt-3">
                                <p class="text-muted mb-2">Price</p>
                                <h5 class="mb-0 mt-2"><span class="text-muted me-2"><del class="font-size-16 fw-normal"></del></span>Rs{{item.product.price}}</h5>
                            </div>
                        </div>
                        <div class="col-md-5">
                            <div class="mt-3">
                                <p class="text-muted mb-2">Quantity</p>
                                <div class="d-inline-flex">
                                    
                                        {% for product_uid, quantity in user_cart.products_summary.items %}
                                        
                                            {% if item.product.uid == product_uid %}

                                            <div class="form-outline" style="width: 7rem;">
                                        <input step="1" value={{ quantity }} type="number" id="typeNumber" class="form-control" />
                                    </div>
                                    
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="mt-3">
                                <p class="text-muted mb-2">{{item.total_price}}</p>
                                <h5>{{ quantity }} x {{item.product.price}} = {% widthratio quantity 1 item.product.price%}</h5>
                                {% endif %}
                                      
                                    {% endfor %}
                           



                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

        {%endfor%}
      </div>
    </div>
  </div>
      <p class="ps-2 name"></p> 
    </div> 
    <div class="box-inner-1 pb-3 mb-3 "> 
      <div class="d-flex justify-content-between mb-3 userdetails"> 
        <p class="fw-bold">Total</p> 
        <p class="fw-lighter"><span class="fas">

        </span>Rs {{total_price}}</p> 
      </div> 
      <div id="my" class="carousel slide carousel-fade img-details" data-bs-ride="carousel" data-bs-interval="2000">
         <div class="carousel-indicators"> 
          <button type="button" data-bs-target="#my" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button> 
          <button type="button" data-bs-target="#my" data-bs-slide-to="1" aria-label="Slide 2"></button> 
          <button type="button" data-bs-target="#my" data-bs-slide-to="2" aria-label="Slide 3"></button> 
        </div> 
        <div class="carousel-inner"> 
          <div class="carousel-item active"> 
            <img src="" class="d-block w-10"> 
          </div> 
          <div class="carousel-item"> 
            <img src="" class="d-block w-10"> 
          </div> 
          <div class="carousel-item"> 
            <img src="" class="d-block w-10"> 
          </div> 
        </div> 
        <button class="carousel-control-prev" type="button" data-bs-target="#my" data-bs-slide="prev"> 
          <div class="icon"> 
            <span class="fas fa-arrow-left"></span> 
          </div> 
          <span class="visually-hidden">Previous</span> 
        </button> 
        <button class="carousel-control-next" type="button" data-bs-target="#my" data-bs-slide="next"> 
          <div class="icon"> 
            <span class="fas fa-arrow-right"></span> 
          </div> <span class="visually-hidden">Next</span> 
        </button> 
      </div> 
      <p class="dis my-3 info"> </p> 
      <p class="dis mb-3 updates">Free updates forever</p> 
      <p class="dis mb-3 different">Three different colored sets:</p> 
      <div class="dis"> 
        <p class="black">
          <span class="fas fa-arrow-right mb-3 pe-2"></span>Black</p> 
          <p class="white">
            <span class="fas fa-arrow-right mb-3 pe-2"></span>White</p> 
            <p class="pastel">
              <span class="fas fa-arrow-right mb-3 pe-2"></span>Pastel</p> 
            </div> 
            <div> 
              <p class="dis footer my-3">Here is a quick guide on how to apply them</p> 
            </div> 
          </div> 
        </div> 
        <div class="box-2"> 
          <div class="box-inner-2"> 
            <div> 
              <p class="fw-bold">Payment Details</p> 
              <p class="dis mb-3">Complete your purchase by providing your payment details</p> 
            </div> <form action="" method ="POST"> 
              <div class="mb-3"> 
                <p class="dis fw-bold mb-2">Name</p> 
                <input class="form-control" name= "name" type="name" value="{{user.first_name}} {{user.last_name}}"> 
              </div> 
              <div class="mb-3"> 
                <p class="dis fw-bold mb-2">Email address</p> 
                <input class="form-control" type="email" name="email" value="{{user.email}}"> 
              </div>
              <div class="mb-3"> 
                <p class="dis fw-bold mb-2">Phone Number</p> 
                <input class="form-control" type="text" name="phone" value="{{user.phone}}"> 
              </div>
              <div class="mb-3"> 
                <p class="dis fw-bold mb-2">Country</p> 
                <input class="form-control" type="text" name="country" value="Pakistan"> 
              </div> 
              <div class="mb-3"> 
                <p class="dis fw-bold mb-2">Province</p> 
                <input class="form-control" type="text" name="province" value=""> 
              </div> 
              <div class="mb-3"> 
                <p class="dis fw-bold mb-2">City</p> 
                <input class="form-control" type="text" name="city" value=""> 
              </div> 
              <div class="mb-3"> 
                <p class="dis fw-bold mb-2">Postal Code</p> 
                <input class="form-control" type="number" name="postal_code" value=""> 
              </div> 
              <div class="mb-3"> 
                <p class="dis fw-bold mb-2">Address</p> 
                <input class="form-control" type="text" name="address" value=""> 
              </div> 
              <div> 
                <p class="dis fw-bold mb-2">Card details</p> 
                <div class="d-flex align-items-center justify-content-between card-atm border rounded"> 
                  <div class="fab fa-cc-visa ps-3">

                  </div> 
                  <input type="text" class="form-control" placeholder="Card Details"> 
                  <div class="d-flex w-50"> 
                    <input type="text" class="form-control px-0" placeholder="MM/YY"> 
                    <input type="password" maxlength=3 class="form-control px-0" placeholder="CVV"> 
                  </div> 
                </div> 
                <div class="my-3 cardname"> 
                  <p class="dis fw-bold mb-2">Cardholder name</p> 
                  <input class="form-control" type="text"> 
                </div> 
                  <div class="address"> 
                    <p class="dis fw-bold mb-3">Billing address</p> 
                    <select class="form-select" aria-label="Default select example"> 
                      <option selected hidden>Pakistan</option> 
                      <option value="1">India</option> 
                      <option value="2">Australia</option> 
                      <option value="3">Canada</option> </select> 
                      <div class="d-flex"> <input class="form-control zip" type="text" placeholder="ZIP"> 
                        <input class="form-control state" type="text" placeholder="State"> 
                      
                      </div> 
                      <div class="my-3"> 
                        <p class="dis fw-bold mb-2">Discount Code</p> 
                        <input class="form-control text-uppercase" type="text" value="" id="discount"> 
                      </div> 
                      <div class="form-check"> 
                        
                      <input class="form-check-input" type="checkbox" value="save_address" id="save_address" name="save_address">
                      <label class="form-check-label" for="save_address">Save Address  </label>
                      <div>
                        <br>
                      <div class="d-flex flex-column dis"> 
                        <div class="d-flex align-items-center justify-content-between mb-2"> 
                          <p>Subtotal</p> 
                          <p><span class="fas "></span> Rs {{total_price}}</p> 
                        </div> 
                        <div class="d-flex align-items-center justify-content-between mb-2"> 
                          <div class="d-flex align-items-center"> 
                            <p class="pe-2">Discount 
                              <span class="d-inline-flex align-items-center justify-content-between bg-light px-2 couponCode"> 
                                <span id="code" class="pe-2"></span> 
                                <span class="fas fa-times cloe">

                                </span> 
                              </span> 
                            </p> 
                          </div> 
                          <p>
                            <span class="fas "></span>0.00</p> 
                          </div> 
                          <div class="d-flex align-items-center justify-content-between mb-2"> 
                            <p class="fw-bold">Total</p> 
                            <p class="fw-bold"><span class="fas "></span>Rs {{total_price}}</p> 
                          </div> 
                          <button class="btn btn-primary mt-2" type="submit" name='submit'>Pay Rs {{total_price}}</button><span class="fas px-1"></span>
                          </div> 
                        </div> 
                      </div> 
                    </div> 
                  </form> 
                </div> 
              </div> 
            </div>
          </body>